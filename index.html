<!doctype html>
<html lang="pl">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="theme-color" content="#0b1220" />
  <title>üíò Walentynki</title>
  <style>
    :root{
      --bg0:#070a12;
      --bg1:#0b1220;
      --card: rgba(255,255,255,.08);
      --stroke: rgba(255,255,255,.12);
      --text: rgba(255,255,255,.92);
      --muted: rgba(255,255,255,.72);
      --hot:#ff4d8d;
      --cool:#38bdf8;
      --cool2:#8b5cf6;
      --shadow: 0 30px 80px rgba(0,0,0,.55);
      --radius: 22px;
    }

    *{ box-sizing:border-box; }
    html,body{ height:100%; }
    body{
      margin:0;
      font-family: ui-sans-serif, system-ui, -apple-system, Segoe UI, Roboto, Inter, Arial, "Noto Sans", "Apple Color Emoji", "Segoe UI Emoji";
      color: var(--text);
      overflow:hidden;
      background:
        radial-gradient(1100px 600px at 10% 10%, rgba(56,189,248,.22), transparent 60%),
        radial-gradient(1000px 600px at 90% 20%, rgba(139,92,246,.22), transparent 58%),
        radial-gradient(900px 700px at 50% 90%, rgba(255,77,141,.18), transparent 60%),
        linear-gradient(180deg, var(--bg0), var(--bg1));
    }

    /* subtle noise */
    body::before{
      content:"";
      position:fixed; inset:0;
      background-image:url('data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" width="220" height="220"><filter id="n"><feTurbulence type="fractalNoise" baseFrequency=".9" numOctaves="3" stitchTiles="stitch"/></filter><rect width="220" height="220" filter="url(%23n)" opacity=".22"/></svg>');
      mix-blend-mode: overlay;
      opacity:.18;
      pointer-events:none;
    }

    /* floating bokeh */
    .orb{ position:absolute; border-radius:999px; filter: blur(1px); opacity:.6; }
    .orb.one{ width:220px; height:220px; left:-60px; top:22vh; background: rgba(56,189,248,.18); animation: float1 12s ease-in-out infinite; }
    .orb.two{ width:260px; height:260px; right:-90px; top:14vh; background: rgba(139,92,246,.16); animation: float2 14s ease-in-out infinite; }
    .orb.three{ width:200px; height:200px; left:55vw; bottom:-70px; background: rgba(255,77,141,.14); animation: float3 16s ease-in-out infinite; }
    @keyframes float1{ 0%,100%{ transform: translate(0,0);} 50%{ transform: translate(30px,-25px);} }
    @keyframes float2{ 0%,100%{ transform: translate(0,0);} 50%{ transform: translate(-25px,30px);} }
    @keyframes float3{ 0%,100%{ transform: translate(0,0);} 50%{ transform: translate(10px,-30px);} }

    /* stage */
    .stage{ position:relative; height:100%; width:100%; display:grid; place-items:center; padding:24px; }

    .card{
      width:min(760px, 94vw);
      background: linear-gradient(180deg, rgba(255,255,255,.10), rgba(255,255,255,.06));
      border: 1px solid var(--stroke);
      border-radius: var(--radius);
      box-shadow: var(--shadow);
      backdrop-filter: blur(16px);
      padding: 22px;
      position:relative;
      overflow:hidden;
    }

    .topbar{
      display:flex; align-items:center; justify-content:space-between;
      gap:12px; padding:6px 4px 12px;
    }

    .badge{
      display:inline-flex; align-items:center; gap:10px;
      padding:10px 12px;
      border-radius: 999px;
      border: 1px solid rgba(255,255,255,.12);
      background: rgba(255,255,255,.06);
    }

    .badge .dot{ width:10px; height:10px; border-radius:999px; background: linear-gradient(135deg, var(--cool), var(--cool2)); box-shadow: 0 0 0 4px rgba(56,189,248,.12); }

    .title{
      margin: 12px 4px 6px;
      font-size: clamp(26px, 4vw, 44px);
      line-height: 1.05;
      letter-spacing: -0.02em;
    }

    .subtitle{ margin:0 4px 14px; color: var(--muted); font-size: 15px; }

    .grid{
      display:grid;
      grid-template-columns: 1.2fr .8fr;
      gap: 14px;
    }

    @media (max-width: 780px){
      .grid{ grid-template-columns: 1fr; }
    }

    .panel{
      border: 1px solid rgba(255,255,255,.10);
      background: rgba(0,0,0,.18);
      border-radius: 18px;
      padding: 16px;
      position:relative;
      overflow:hidden;
    }

    .panel h3{ margin:0 0 6px; font-size: 14px; color: rgba(255,255,255,.75); font-weight:600; letter-spacing:.02em; }
    .panel p{ margin:0; color: rgba(255,255,255,.85); }

    .cta{
      display:flex; align-items:center; gap:10px; flex-wrap:wrap;
      margin-top: 14px;
    }

    .btn{
      appearance:none; border:none; cursor:pointer;
      padding: 12px 16px;
      border-radius: 14px;
      font-weight: 700;
      letter-spacing: .01em;
      color: rgba(255,255,255,.92);
      background: rgba(255,255,255,.06);
      border: 1px solid rgba(255,255,255,.12);
      transition: transform .18s ease, background .18s ease, border-color .18s ease;
      user-select:none;
    }
    .btn:active{ transform: translateY(1px) scale(.99); }

    .btn.primary{
      background: linear-gradient(135deg, rgba(34,197,94,.95), rgba(16,185,129,.92));
      border-color: rgba(34,197,94,.38);
      box-shadow: 0 16px 50px rgba(34,197,94,.20);
    }
    .btn.primary:hover{ transform: translateY(-1px) scale(1.01); }

    .btn.ghost{ background: rgba(255,255,255,.05); }
    .btn.small{ padding:9px 12px; border-radius: 12px; font-weight:650; }

    .hint{
      font-size: 13px;
      color: rgba(255,255,255,.65);
      margin-top: 10px;
    }

    /* Decorative "Stitch vibe" (oryginalna ikonka - nie kopiuje postaci 1:1) */
    .stitch-vibe{
      position:absolute;
      right: -18px;
      top: -16px;
      width: 170px;
      opacity: .92;
      transform: rotate(6deg);
      filter: drop-shadow(0 18px 22px rgba(0,0,0,.35));
      pointer-events:none;
    }

    .seal-stack{ display:grid; gap:10px; align-content:start; }

    .seal{
      display:flex; gap:12px;
      align-items:center;
      padding: 12px;
      border-radius: 16px;
      border: 1px solid rgba(255,255,255,.10);
      background: rgba(255,255,255,.04);
    }

    .seal b{ font-size: 14px; }
    .seal span{ display:block; font-size: 13px; color: rgba(255,255,255,.72); margin-top:2px; }

    .seal svg{ width:48px; height:48px; flex: 0 0 auto; filter: drop-shadow(0 10px 18px rgba(0,0,0,.28)); }

    /* Polaroids (Opcja 3) */
    .polaroids{
      margin-top: 14px;
      border: 1px solid rgba(255,255,255,.10);
      background: rgba(0,0,0,.16);
      border-radius: 18px;
      padding: 16px;
      overflow:hidden;
    }
    .polaroids-head{ display:flex; align-items:flex-end; justify-content:space-between; gap:12px; flex-wrap:wrap; }
    .polaroids-head h3{ margin:0; font-size: 14px; color: rgba(255,255,255,.78); letter-spacing:.02em; }
    .polaroids-head p{ margin:0; font-size: 13px; color: rgba(255,255,255,.62); }

    .polaroid-grid{ margin-top: 12px; display:grid; grid-template-columns: repeat(3, minmax(0, 1fr)); gap: 12px; }
    @media (max-width: 780px){ .polaroid-grid{ grid-template-columns: repeat(2, minmax(0, 1fr)); } }

    .polaroid{
      border-radius: 18px;
      border: 1px solid rgba(255,255,255,.10);
      background: rgba(255,255,255,.04);
      padding: 10px;
      box-shadow: 0 18px 50px rgba(0,0,0,.35);
      transform: rotate(var(--tilt, -2deg));
      transition: transform .18s ease;
      overflow:hidden;
      min-height: 170px;
    }
    .polaroid:hover{ transform: rotate(var(--tilt, -2deg)) translateY(-2px) scale(1.01); }

    .polaroid-photo{
      width:100%;
      height: 120px;
      border-radius: 14px;
      border: 1px solid rgba(255,255,255,.10);
      background:
        radial-gradient(220px 120px at 20% 20%, rgba(56,189,248,.24), transparent 60%),
        radial-gradient(220px 120px at 80% 30%, rgba(255,77,141,.18), transparent 60%),
        linear-gradient(135deg, rgba(255,255,255,.06), rgba(255,255,255,.02));
      display:grid; place-items:center;
      position:relative; overflow:hidden;
    }
    .polaroid-photo img{ width:100%; height:100%; object-fit: cover; display:block; }
    .polaroid-emoji{ font-size: 26px; opacity:.9; filter: drop-shadow(0 12px 18px rgba(0,0,0,.35)); }
    .polaroid-cap{ margin: 10px 2px 2px; font-size: 13px; color: rgba(255,255,255,.80); }

    /* Modal */
    .modal-backdrop{
      position:fixed; inset:0;
      display:grid; place-items:center;
      background: radial-gradient(900px 450px at 50% 30%, rgba(255,77,141,.18), rgba(0,0,0,.68));
      padding: 18px;
      z-index: 20;
    }

    .modal{
      width: min(520px, 92vw);
      border-radius: 24px;
      border: 1px solid rgba(255,255,255,.14);
      background: linear-gradient(180deg, rgba(255,255,255,.10), rgba(255,255,255,.06));
      box-shadow: 0 40px 120px rgba(0,0,0,.65);
      backdrop-filter: blur(18px);
      padding: 18px;
      position:relative;
      overflow:hidden;
    }

    .modal h2{ margin: 6px 0 6px; font-size: 22px; letter-spacing: -.01em; }
    .modal p{ margin:0 0 14px; color: rgba(255,255,255,.74); font-size: 14px; line-height: 1.35; }

    .actions{
      position:relative;
      height: 120px;
      border-radius: 18px;
      border: 1px dashed rgba(255,255,255,.18);
      background: rgba(0,0,0,.18);
      overflow:hidden;
    }

    .actions .btn{
      position:absolute;
      min-width: 140px;
      height: 44px;
      display:inline-grid; place-items:center;
    }

    #yesBtn{ left: 18px; top: 30px; transform-origin: left center; }
    #nopeBtn{ right: 18px; top: 30px; }

    .sparkle{
      position:absolute;
      width: 8px; height: 8px;
      border-radius: 999px;
      background: rgba(255,255,255,.9);
      opacity:.8;
      filter: blur(.2px);
      animation: twinkle 2.4s ease-in-out infinite;
    }
    @keyframes twinkle{ 0%,100%{ transform: scale(.65); opacity:.5;} 50%{ transform: scale(1.2); opacity:.95;} }

    /* mini-gierka bar + toast (Opcja 2) */
    .gamebar{
      display:flex; align-items:center; justify-content:space-between; gap:10px; flex-wrap:wrap;
      margin-top: 10px;
      color: rgba(255,255,255,.62);
      font-size: 12px;
    }

    .toast{
      position:absolute;
      left: 12px;
      right: 12px;
      bottom: 12px;
      padding: 10px 12px;
      border-radius: 14px;
      border: 1px solid rgba(255,255,255,.14);
      background: rgba(0,0,0,.35);
      backdrop-filter: blur(10px);
      color: rgba(255,255,255,.86);
      font-size: 13px;
      transform: translateY(10px);
      opacity: 0;
      transition: opacity .18s ease, transform .18s ease;
      pointer-events:none;
    }
    .toast.show{ opacity:1; transform: translateY(0); }

    .btn.catchable{
      border-color: rgba(255,77,141,.55);
      box-shadow: 0 16px 50px rgba(255,77,141,.18);
      animation: pulse 1s ease-in-out infinite;
    }
    @keyframes pulse{ 0%,100%{ transform: scale(1) rotate(0deg);} 50%{ transform: scale(1.03) rotate(-2deg);} }

    /* Footer */
    .footer{
      display:flex; justify-content:space-between; align-items:center; gap:10px;
      margin-top: 10px;
      color: rgba(255,255,255,.55);
      font-size: 12px;
    }

    .pill{
      display:inline-flex; align-items:center; gap:8px;
      padding: 8px 10px;
      border-radius: 999px;
      background: rgba(255,255,255,.05);
      border: 1px solid rgba(255,255,255,.10);
    }

    /* Celebration overlay + list (Opcja 1) */
    .celebrate{
      position:fixed; inset:0;
      display:none;
      place-items:center;
      background: radial-gradient(900px 500px at 50% 30%, rgba(34,197,94,.18), rgba(0,0,0,.82));
      padding: 18px;
      z-index: 30;
    }
    .celebrate.show{ display:grid; }

    .celebrate .box{
      width:min(560px, 94vw);
      border-radius: 24px;
      border: 1px solid rgba(255,255,255,.14);
      background: linear-gradient(180deg, rgba(255,255,255,.10), rgba(255,255,255,.06));
      box-shadow: 0 40px 120px rgba(0,0,0,.65);
      backdrop-filter: blur(18px);
      padding: 18px;
      text-align:center;
      position:relative;
      overflow:hidden;
    }

    .letter{
      text-align:left;
      border-radius: 22px;
      border: 1px solid rgba(255,255,255,.14);
      background: rgba(0,0,0,.18);
      padding: 16px;
      position:relative;
      overflow:hidden;
    }
    .letter::before{
      content:"";
      position:absolute; inset:-2px;
      background:
        radial-gradient(700px 260px at 20% 10%, rgba(255,77,141,.14), transparent 60%),
        radial-gradient(700px 260px at 80% 0%, rgba(56,189,248,.14), transparent 60%);
      pointer-events:none;
    }

    .letter-head{ display:flex; align-items:flex-start; justify-content:space-between; gap:12px; position:relative; }
    .letter-head h2{ margin:0; font-size: 22px; letter-spacing: -.02em; }
    .stamp{ width:44px; height:44px; border-radius: 16px; display:grid; place-items:center;
      background: rgba(255,255,255,.06); border: 1px solid rgba(255,255,255,.12);
      box-shadow: 0 18px 60px rgba(0,0,0,.35);
    }

    .letter-body{ margin-top: 10px; position:relative; }
    .letter-line{ margin: 0 0 10px; color: rgba(255,255,255,.80); line-height: 1.45; opacity:0; transform: translateY(6px); animation: lineIn .55s ease forwards; }
    @keyframes lineIn{ to{ opacity:1; transform: translateY(0);} }
    .letter-sign{ margin-top: 8px; color: rgba(255,255,255,.72); font-size: 13px; position:relative; }

    /* Confetti */
    .confetti{ position:fixed; inset:0; pointer-events:none; z-index: 40; overflow:hidden; }
    .piece{
      position:absolute;
      top:-10px;
      width: 10px; height: 16px;
      border-radius: 4px;
      opacity:.9;
      transform: rotate(12deg);
      animation: fall linear forwards;
    }
    @keyframes fall{ to{ transform: translateY(110vh) rotate(420deg); opacity: .95; } }

    /* Heart trail (Opcja 8) */
    .heart{
      position: fixed;
      z-index: 60;
      pointer-events: none;
      user-select:none;
      will-change: transform, opacity;
      font-size: 16px;
      filter: drop-shadow(0 10px 18px rgba(0,0,0,.35));
      animation: heartFloat 900ms ease-out forwards;
    }
    @keyframes heartFloat{
      0%{ opacity:0; transform: translate(-50%, -50%) scale(.7) rotate(0deg); }
      15%{ opacity:.95; }
      100%{ opacity:0; transform: translate(calc(-50% + var(--dx, 0px)), calc(-50% + var(--dy, -34px))) scale(1.15) rotate(var(--rot, 12deg)); }
    }

    /* Accessibility */
    .sr-only{ position:absolute; left:-10000px; top:auto; width:1px; height:1px; overflow:hidden; }

  </style>
</head>
<body>
  <div class="orb one"></div>
  <div class="orb two"></div>
  <div class="orb three"></div>

  <div class="stage">
    <main class="card" aria-label="Walentynkowa strona">
      <!-- "Stitch vibe" (oryginalny, nie-kopiujƒÖcy rysunek: niebieski kosmita z wielkimi uszami) -->
      <svg class="stitch-vibe" viewBox="0 0 220 220" aria-hidden="true">
        <defs>
          <linearGradient id="g1" x1="0" x2="1" y1="0" y2="1">
            <stop offset="0" stop-color="#38bdf8" stop-opacity=".95"/>
            <stop offset="1" stop-color="#8b5cf6" stop-opacity=".95"/>
          </linearGradient>
          <linearGradient id="g2" x1="0" x2="1" y1="1" y2="0">
            <stop offset="0" stop-color="#ff4d8d" stop-opacity=".95"/>
            <stop offset="1" stop-color="#38bdf8" stop-opacity=".75"/>
          </linearGradient>
        </defs>
        <!-- ears -->
        <path d="M40 70 C10 45, 12 25, 44 28 C70 30, 78 58, 72 78" fill="url(#g1)" opacity=".9"/>
        <path d="M165 75 C196 50, 208 30, 182 26 C154 22, 142 56, 148 82" fill="url(#g1)" opacity=".9"/>
        <!-- head -->
        <path d="M70 70 C72 46, 92 34, 112 34 C134 34, 152 48, 154 72 C156 98, 144 128, 112 140 C80 128, 68 98, 70 70" fill="url(#g1)"/>
        <!-- face -->
        <ellipse cx="95" cy="82" rx="10" ry="12" fill="rgba(0,0,0,.55)"/>
        <ellipse cx="128" cy="82" rx="10" ry="12" fill="rgba(0,0,0,.55)"/>
        <circle cx="92" cy="78" r="3" fill="rgba(255,255,255,.75)"/>
        <circle cx="125" cy="78" r="3" fill="rgba(255,255,255,.75)"/>
        <path d="M103 100 C110 110, 117 110, 124 100" stroke="rgba(0,0,0,.55)" stroke-width="6" stroke-linecap="round" fill="none"/>
        <path d="M104 118 C110 124, 116 124, 122 118" stroke="rgba(255,255,255,.25)" stroke-width="4" stroke-linecap="round" fill="none"/>
        <!-- little heart -->
        <path d="M180 140 C180 132, 190 130, 194 137 C198 130, 208 132, 208 140 C208 152, 194 160, 194 160 C194 160, 180 152, 180 140" fill="url(#g2)"/>
      </svg>

      <div class="topbar">
        <div class="badge">
          <span class="dot"></span>
          <span><b>Walentynkowy link</b> ‚Ä¢ mini-niespodzianka</span>
        </div>
        <button class="btn small ghost" id="openModalBtn" type="button">Otw√≥rz pytanie üíò</button>
      </div>

      <h1 class="title" id="headline">Hej Kochanie ‚ù§Ô∏è</h1>
      <p class="subtitle" id="subline">Mam dla Ciebie jedno pytanko‚Ä¶ ale spokojnie, jest w nim du≈ºo serca i trochƒô mem√≥w ü¶≠</p>

      <div class="grid">
        <section class="panel">
          <h3>Ma≈Ça niespodzianka üíå</h3>
          <p>
            Zrobi≈Çem dla Ciebie mini-portal walentynkowy. Jest tylko jedno pytanie ‚Äî i obiecujƒô, ≈ºe odpowied≈∫ jest prosta üòå
          </p>

          <div class="cta">
            <button class="btn primary" id="openModalBtn2" type="button">Otw√≥rz pytanie üíñ</button>
            <button class="btn ghost" id="toggleBgBtn" type="button">Tryb mem√≥w ü¶≠</button>
          </div>
          <div class="hint">Tip: je≈õli zobaczysz uciekajƒÖce ‚ÄûNope‚Äù, to‚Ä¶ wszystko dzia≈Ça jak trzeba üôÉ</div>
        </section>

        <aside class="seal-stack">
          <div class="seal">
            <svg viewBox="0 0 96 96" aria-hidden="true">
              <defs>
                <linearGradient id="sealG" x1="0" x2="1" y1="0" y2="1">
                  <stop offset="0" stop-color="#c4a484" stop-opacity=".95"/>
                  <stop offset="1" stop-color="#8b6f5a" stop-opacity=".95"/>
                </linearGradient>
              </defs>
              <ellipse cx="48" cy="56" rx="30" ry="26" fill="url(#sealG)"/>
              <ellipse cx="48" cy="60" rx="22" ry="18" fill="rgba(0,0,0,.12)"/>
              <path d="M18 62c-6 8-2 18 10 18 6 0 10-4 10-8-2-8-8-12-20-10z" fill="rgba(0,0,0,.12)"/>
              <path d="M78 62c6 8 2 18-10 18-6 0-10-4-10-8 2-8 8-12 20-10z" fill="rgba(0,0,0,.12)"/>
              <circle cx="38" cy="52" r="4" fill="rgba(0,0,0,.55)"/>
              <circle cx="58" cy="52" r="4" fill="rgba(0,0,0,.55)"/>
              <circle cx="36.5" cy="50.5" r="1.6" fill="rgba(255,255,255,.75)"/>
              <circle cx="56.5" cy="50.5" r="1.6" fill="rgba(255,255,255,.75)"/>
              <path d="M44 60c4 4 4 4 8 0" stroke="rgba(0,0,0,.45)" stroke-width="4" stroke-linecap="round" fill="none"/>
              <circle cx="48" cy="58" r="3" fill="rgba(0,0,0,.35)"/>
              <path d="M28 60h12" stroke="rgba(255,255,255,.35)" stroke-width="2" stroke-linecap="round"/>
              <path d="M28 64h12" stroke="rgba(255,255,255,.25)" stroke-width="2" stroke-linecap="round"/>
              <path d="M56 60h12" stroke="rgba(255,255,255,.35)" stroke-width="2" stroke-linecap="round"/>
              <path d="M56 64h12" stroke="rgba(255,255,255,.25)" stroke-width="2" stroke-linecap="round"/>
              <path d="M72 28c0-3 4-4 6-1 2-3 6-2 6 1 0 5-6 8-6 8s-6-3-6-8z" fill="rgba(255,77,141,.95)"/>
            </svg>
            <div>
              <b>Lew morski vibe</b>
              <span>‚ÄûAUUU ü¶≠‚Äù (t≈Çum.: kliknij ‚ÄûJes‚Äù) </span>
            </div>
          </div>

          <div class="seal">
            <svg viewBox="0 0 96 96" aria-hidden="true">
              <defs>
                <linearGradient id="sealG2" x1="0" x2="1" y1="0" y2="1">
                  <stop offset="0" stop-color="#bfa08a" stop-opacity=".95"/>
                  <stop offset="1" stop-color="#7b6150" stop-opacity=".95"/>
                </linearGradient>
              </defs>
              <ellipse cx="48" cy="58" rx="32" ry="27" fill="url(#sealG2)"/>
              <ellipse cx="48" cy="62" rx="24" ry="19" fill="rgba(0,0,0,.12)"/>
              <path d="M22 66c-7 8-3 18 9 18 7 0 11-5 11-9-2-8-8-12-20-9z" fill="rgba(0,0,0,.12)"/>
              <path d="M74 66c7 8 3 18-9 18-7 0-11-5-11-9 2-8 8-12 20-9z" fill="rgba(0,0,0,.12)"/>
              <circle cx="40" cy="54" r="4" fill="rgba(0,0,0,.55)"/>
              <circle cx="60" cy="54" r="4" fill="rgba(0,0,0,.55)"/>
              <path d="M34 54c2 0 3 2 4 3" stroke="rgba(0,0,0,.55)" stroke-width="4" stroke-linecap="round" fill="none"/>
              <circle cx="48" cy="60" r="3" fill="rgba(0,0,0,.35)"/>
              <path d="M44 64c4 4 4 4 8 0" stroke="rgba(0,0,0,.45)" stroke-width="4" stroke-linecap="round" fill="none"/>
              <path d="M30 62h10" stroke="rgba(255,255,255,.28)" stroke-width="2" stroke-linecap="round"/>
              <path d="M56 62h10" stroke="rgba(255,255,255,.28)" stroke-width="2" stroke-linecap="round"/>
            </svg>
            <div>
              <b>Memy approved</b>
              <span>W≈ÇƒÖcz tryb mem√≥w ‚Äî lwy morskie bƒôdƒÖ p≈Çywaƒá po tle.</span>
            </div>
          </div>
        </aside>
      </div>

      <section class="polaroids" aria-label="Polaroidy">
        <div class="polaroids-head">
          <div>
            <h3>Nasze mini-wspomnienia üì∏</h3>
            <p>Tu p√≥≈∫niej wrzucimy zdjƒôcia ‚Äî na razie szkielecik i klimat.</p>
          </div>
          <div class="pill">(P√≥≈∫niej podmienimy na fotki)</div>
        </div>
        <div class="polaroid-grid" id="polaroidGrid"></div>
      </section>

      <div class="footer">
        <div class="pill">‚ú® nowoczesny vibe ‚Ä¢ üíé lekki plik ‚Ä¢ ü¶≠ mem-energy</div>
        <div class="pill">Zrobione z ‚ô• (i odrobinƒÖ chaosu)</div>
      </div>
    </main>
  </div>

  <!-- MODAL -->
  <div class="modal-backdrop" id="modalBackdrop" style="display:none" role="dialog" aria-modal="true" aria-labelledby="modalTitle">
    <div class="modal" id="modal">
      <div class="sparkle" style="left:18px; top:16px; animation-delay:.2s"></div>
      <div class="sparkle" style="left:60px; top:28px; animation-delay:1.1s"></div>
      <div class="sparkle" style="right:22px; top:18px; animation-delay:.7s"></div>

      <h2 id="modalTitle">Czy zostaniesz mojƒÖ walentynkƒÖ? üíò</h2>
      <p id="modalDesc">Wybierz mƒÖdrze. ‚ÄûJes‚Äù ro≈õnie‚Ä¶ a ‚ÄûNope‚Äù jest trochƒô p≈Çochliwy üôÉ</p>

      <div class="actions" id="actionBox" aria-describedby="modalDesc">
        <button class="btn primary" id="yesBtn" type="button">Jes üíñ</button>
        <button class="btn ghost" id="nopeBtn" type="button">Nope üòÖ</button>
      </div>

      <div class="gamebar" id="gamebar">
        <span class="pill">Ucieczki ‚ÄûNope‚Äù: <b id="nopeCount">0</b></span>
        <span class="pill">Bonus ‚ÄûJes‚Äù: <b id="yesBonus">0</b></span>
      </div>

      <div class="footer" style="margin-top:12px;">
        <span class="pill">Tip: raz na jaki≈õ czas ‚ÄûNope‚Äù da siƒô z≈Çapaƒá üëÄ</span>
        <button class="btn small ghost" id="closeModalBtn" type="button">Zamknij</button>
      </div>

      <div class="toast" id="toast" role="status" aria-live="polite"></div>

      <span class="sr-only" id="ariaLive" aria-live="polite"></span>
    </div>
  </div>

  <!-- CELEBRATION / LIST -->
  <div class="celebrate" id="celebrate">
    <div class="box">
      <div class="letter" id="letter">
        <div class="letter-head">
          <h2 id="letterTitle">Dla Ciebie üíå</h2>
          <div class="stamp">üíò</div>
        </div>
        <div class="letter-body" id="letterBody"></div>
        <div class="letter-sign" id="letterSign"></div>
      </div>

      <div style="display:flex; justify-content:center; gap:10px; flex-wrap:wrap; margin-top:12px;">
        <button class="btn primary" id="againBtn" type="button">Jeszcze raz üòÑ</button>
        <button class="btn ghost" id="copyBtn" type="button">Kopiuj tekst üìã</button>
        <button class="btn ghost" id="closeCelebrateBtn" type="button">Zamknij</button>
      </div>
      <p class="hint" id="copyHint" style="margin-top:12px;"></p>
    </div>
  </div>

  <div class="confetti" id="confetti"></div>

  <script>
    /***********************
     *  SZYBKA PERSONALIZACJA
     ***********************/
    const CONFIG = {
      partnerName: "Kochanie", // np. "Ola" / "Misia" / "Skarbie"
      headline: "Hej Ty ‚ù§Ô∏è",
      subline: "Mam dla Ciebie jedno pytanko‚Ä¶ ale spokojnie, jest w nim du≈ºo serca i trochƒô mem√≥w ü¶≠",

      // Popup
      question: "Czy zostaniesz mojƒÖ walentynkƒÖ? üíò",
      yesLabel: "Jes üíñ",
      nopeLabel: "Nope üòÖ",

      // List po klikniƒôciu "Jes" (Opcja 1)
      letterTitle: "Dla Ciebie üíå",
      letterLines: [
        "Mam do Ciebie jedno proste pytanie‚Ä¶",
        "ale odpowied≈∫ znaczy dla mnie naprawdƒô du≈ºo.",
        "Chcƒô byƒá TwojƒÖ walentynkƒÖ ‚Äî dzi≈õ i w ka≈ºdy zwyk≈Çy dzie≈Ñ.",
        "(Tak, nawet w dni z memami o lwach morskich ü¶≠)",
      ],
      letterSignature: "‚Äî Tw√≥j cz≈Çowiek ‚ú®",

      // Tekst do kopiowania
      copiedText: "Zostaniesz mojƒÖ walentynkƒÖ? üíò

PS. Lew morski m√≥wi: AUUU ü¶≠
PS2. Niebieski kosmita te≈º siƒô cieszy ‚ú®",

      // Polaroidy (Opcja 3)
      // Jak bƒôdziesz gotowy: wrzuƒá fotki do folderu assets/ i wpisz src: 'assets/zdjecie1.jpg'
      polaroids: [
        { src: "", caption: "Nasza chwila #1", emoji: "üì∏" },
        { src: "", caption: "Nasza chwila #2", emoji: "üí´" },
        { src: "", caption: "Nasza chwila #3", emoji: "ü´∂" },
      ],

      // zachowanie przycisku "Jes"
      yesGrowPerSecond: 0.03,
      yesMaxScale: 6.0,

      // minigierka (Opcja 2)
      nopeCatchEvery: 6,
      nopeCatchWindowMs: 900,

      // "Nope" ucieka w obrƒôbie pola z przyciskami
      nopePadding: 10,

      // konfetti
      confettiPieces: 130,
      confettiDurationMs: 1400,

      // ≈ölad serduszek (Opcja 8)
      heartsEnabled: true,
      heartsThrottleMs: 55,
      heartsMaxOnScreen: 90,
    };

    // Elements
    const headlineEl = document.getElementById('headline');
    const sublineEl  = document.getElementById('subline');

    const modalBackdrop = document.getElementById('modalBackdrop');
    const openModalBtn  = document.getElementById('openModalBtn');
    const openModalBtn2 = document.getElementById('openModalBtn2');
    const closeModalBtn = document.getElementById('closeModalBtn');

    const actionBox = document.getElementById('actionBox');
    const yesBtn = document.getElementById('yesBtn');
    const nopeBtn = document.getElementById('nopeBtn');
    const ariaLive = document.getElementById('ariaLive');

    const nopeCountEl = document.getElementById('nopeCount');
    const yesBonusEl = document.getElementById('yesBonus');
    const toast = document.getElementById('toast');

    const celebrate = document.getElementById('celebrate');
    const confetti = document.getElementById('confetti');

    const letterTitleEl = document.getElementById('letterTitle');
    const letterBodyEl  = document.getElementById('letterBody');
    const letterSignEl  = document.getElementById('letterSign');

    const againBtn = document.getElementById('againBtn');
    const copyBtn = document.getElementById('copyBtn');
    const closeCelebrateBtn = document.getElementById('closeCelebrateBtn');
    const copyHint = document.getElementById('copyHint');

    const toggleBgBtn = document.getElementById('toggleBgBtn');
    const polaroidGrid = document.getElementById('polaroidGrid');

    // Personalize
    headlineEl.textContent = CONFIG.partnerName ? `${CONFIG.headline.replace('Hej Ty', `Hej ${CONFIG.partnerName}`)}` : CONFIG.headline;
    sublineEl.textContent = CONFIG.subline;

    // Modal text
    document.getElementById('modalTitle').textContent = CONFIG.question;
    yesBtn.textContent = CONFIG.yesLabel;
    nopeBtn.textContent = CONFIG.nopeLabel;

    // Polaroids render (skeleton)
    function renderPolaroids(){
      if(!polaroidGrid) return;
      polaroidGrid.innerHTML = '';
      (CONFIG.polaroids || []).forEach((p, idx)=>{
        const fig = document.createElement('figure');
        fig.className = 'polaroid';
        const tilt = (idx % 2 === 0 ? -2 : 2) + (Math.random()*2 - 1);
        fig.style.setProperty('--tilt', tilt.toFixed(2) + 'deg');

        const photo = document.createElement('div');
        photo.className = 'polaroid-photo';

        if(p.src){
          const img = document.createElement('img');
          img.alt = p.caption || 'Wspomnienie';
          img.loading = 'lazy';
          img.src = p.src;
          photo.appendChild(img);
        }else{
          const emoji = document.createElement('div');
          emoji.className = 'polaroid-emoji';
          emoji.textContent = p.emoji || 'üì∏';
          photo.appendChild(emoji);
        }

        const cap = document.createElement('figcaption');
        cap.className = 'polaroid-cap';
        cap.textContent = p.caption || '';

        fig.appendChild(photo);
        fig.appendChild(cap);
        polaroidGrid.appendChild(fig);
      });
    }
    renderPolaroids();

    // Toast
    function toastShow(msg, ms = 900){
      if(!toast) return;
      toast.textContent = msg;
      toast.classList.add('show');
      if(ms){
        window.clearTimeout(toast._t);
        toast._t = window.setTimeout(()=> toastHide(), ms);
      }
    }
    function toastHide(){
      if(!toast) return;
      toast.classList.remove('show');
    }

    // Modal open/close
    function openModal(){
      modalBackdrop.style.display = 'grid';
      resetButtons();
      resetMiniGame();
      startGrowing();
      setTimeout(()=> yesBtn.focus(), 40);
      toastHide();
    }

    function closeModal(){
      modalBackdrop.style.display = 'none';
      stopGrowing();
      toastHide();
    }

    openModalBtn.addEventListener('click', openModal);
    openModalBtn2.addEventListener('click', openModal);
    closeModalBtn.addEventListener('click', closeModal);

    modalBackdrop.addEventListener('click', (e)=>{
      if(e.target === modalBackdrop) closeModal();
    });

    document.addEventListener('keydown', (e)=>{
      if(e.key === 'Escape' && modalBackdrop.style.display !== 'none') closeModal();
    });

    // YES growing
    let growTimer = null;
    let yesScale = 1;
    let yesBonus = 0;

    function startGrowing(){
      stopGrowing();
      yesScale = 1;
      growTimer = setInterval(()=>{
        yesScale = Math.min(CONFIG.yesMaxScale, yesScale + CONFIG.yesGrowPerSecond + yesBonus);
        yesBtn.style.transform = `scale(${yesScale})`;
        if(Math.abs(yesScale - 2.2) < 0.02){
          ariaLive.textContent = '"Jes" robi siƒô coraz bardziej kuszƒÖce.';
        }
      }, 1000);
    }

    function stopGrowing(){
      if(growTimer) clearInterval(growTimer);
      growTimer = null;
    }

    // "Nope" positioning
    function randomInt(min, max){
      return Math.floor(Math.random() * (max - min + 1)) + min;
    }

    function getBounds(){
      const box = actionBox.getBoundingClientRect();
      const btn = nopeBtn.getBoundingClientRect();
      const pad = CONFIG.nopePadding;

      const maxLeft = box.width - btn.width - pad;
      const maxTop  = box.height - btn.height - pad;

      return {
        minLeft: pad,
        minTop: pad,
        maxLeft: Math.max(pad, maxLeft),
        maxTop: Math.max(pad, maxTop),
      };
    }

    function moveNope(){
      const b = getBounds();
      const yesRect = yesBtn.getBoundingClientRect();
      const boxRect = actionBox.getBoundingClientRect();
      const yesX = yesRect.left - boxRect.left;
      const yesY = yesRect.top  - boxRect.top;

      let left, top, tries = 0;
      do{
        left = randomInt(b.minLeft, b.maxLeft);
        top  = randomInt(b.minTop,  b.maxTop);
        tries++;
      }while(tries < 22 && Math.hypot(left - yesX, top - yesY) < 120);

      nopeBtn.style.left = left + 'px';
      nopeBtn.style.top  = top  + 'px';
      nopeBtn.style.right = 'auto';
      nopeBtn.style.transition = 'transform .12s ease, left .18s ease, top .18s ease, background .18s ease';
      nopeBtn.style.transform = 'rotate(' + randomInt(-10,10) + 'deg)';
    }

    // Mini-gierka: czasem Nope daje siƒô z≈Çapaƒá
    let nopeMoves = 0;
    let nopeCatchable = false;
    let catchTimer = null;

    function updateGamebar(){
      if(nopeCountEl) nopeCountEl.textContent = String(nopeMoves);
      if(yesBonusEl)  yesBonusEl.textContent  = String(Math.round(yesBonus * 100));
    }

    function setCatchable(){
      nopeCatchable = true;
      nopeBtn.classList.add('catchable');
      toastShow('Ok‚Ä¶ teraz mo≈ºesz z≈Çapaƒá ‚ÄûNope‚Äù üòÖ', CONFIG.nopeCatchWindowMs);
      window.clearTimeout(catchTimer);
      catchTimer = window.setTimeout(()=>{
        nopeCatchable = false;
        nopeBtn.classList.remove('catchable');
      }, CONFIG.nopeCatchWindowMs);
    }

    function evadeNope(){
      nopeMoves++;
      updateGamebar();

      if(CONFIG.nopeCatchEvery > 0 && (nopeMoves % CONFIG.nopeCatchEvery) === 0){
        setCatchable();
        return;
      }
      moveNope();
    }

    nopeBtn.addEventListener('pointerenter', ()=>{ if(!nopeCatchable) evadeNope(); });
    nopeBtn.addEventListener('pointerdown', (e)=>{ e.preventDefault(); if(!nopeCatchable) evadeNope(); });

    nopeBtn.addEventListener('click', (e)=>{
      e.preventDefault();
      if(nopeCatchable){
        nopeCatchable = false;
        nopeBtn.classList.remove('catchable');
        toastShow('Nice try üòÑ Ale ‚ÄûJes‚Äù i tak wygrywa.', 1100);
        yesBonus = Math.min(0.12, yesBonus + 0.02);
        yesScale = Math.min(CONFIG.yesMaxScale, yesScale + 0.35);
        yesBtn.style.transform = `scale(${yesScale})`;
        ariaLive.textContent = 'Z≈Çapa≈Çe≈õ ‚ÄûNope‚Äù. "Jes" przyspiesza.';
        updateGamebar();
        setTimeout(()=> moveNope(), 220);
      }else{
        evadeNope();
        ariaLive.textContent = 'Nie tak ≈Çatwo üòÑ';
      }
    });

    // YES click -> list + confetti
    yesBtn.addEventListener('click', ()=>{
      closeModal();
      showCelebration();
    });

    function resetButtons(){
      yesBtn.style.transform = 'scale(1)';
      yesScale = 1;

      yesBtn.style.left = '18px';
      yesBtn.style.top  = '30px';

      nopeBtn.style.left = 'auto';
      nopeBtn.style.top  = '30px';
      nopeBtn.style.right = '18px';
      nopeBtn.style.transform = 'none';
      nopeBtn.classList.remove('catchable');
    }

    function resetMiniGame(){
      nopeMoves = 0;
      nopeCatchable = false;
      yesBonus = 0;
      updateGamebar();
      window.clearTimeout(catchTimer);
      catchTimer = null;
    }

    // List render
    function renderLetter(){
      letterTitleEl.textContent = CONFIG.letterTitle || 'Dla Ciebie üíå';
      letterBodyEl.innerHTML = '';
      (CONFIG.letterLines || []).forEach((line, i)=>{
        const p = document.createElement('p');
        p.className = 'letter-line';
        p.style.animationDelay = (0.12 + i * 0.12) + 's';
        p.textContent = line;
        letterBodyEl.appendChild(p);
      });
      letterSignEl.textContent = CONFIG.letterSignature || '';
    }

    function showCelebration(){
      celebrate.classList.add('show');
      renderLetter();
      spawnConfetti();
      copyHint.textContent = '';
    }

    function hideCelebration(){
      celebrate.classList.remove('show');
      confetti.innerHTML = '';
    }

    againBtn.addEventListener('click', ()=>{
      hideCelebration();
      openModal();
    });

    closeCelebrateBtn.addEventListener('click', hideCelebration);

    copyBtn.addEventListener('click', async ()=>{
      const letterText = [
        CONFIG.letterTitle,
        '',
        ...(CONFIG.letterLines || []),
        '',
        CONFIG.letterSignature,
        '',
        CONFIG.copiedText
      ].filter(Boolean).join('
');

      try{
        await navigator.clipboard.writeText(letterText);
        copyHint.textContent = 'Skopiowane! Mo≈ºesz wkleiƒá do wiadomo≈õci üíå';
      }catch{
        copyHint.textContent = 'Nie uda≈Ço siƒô skopiowaƒá (przeglƒÖdarka blokuje). Skopiuj rƒôcznie:
' + letterText;
      }
    });

    celebrate.addEventListener('click', (e)=>{
      if(e.target === celebrate) hideCelebration();
    });

    // Confetti
    function spawnConfetti(){
      confetti.innerHTML = '';
      const w = window.innerWidth;
      const pieceCount = CONFIG.confettiPieces;

      for(let i=0;i<pieceCount;i++){
        const p = document.createElement('div');
        p.className = 'piece';

        const palette = ['rgba(56,189,248,.95)','rgba(139,92,246,.95)','rgba(255,77,141,.95)','rgba(34,197,94,.95)','rgba(255,255,255,.9)'];
        p.style.background = palette[Math.floor(Math.random()*palette.length)];

        p.style.left = Math.floor(Math.random()*w) + 'px';
        p.style.animationDuration = (900 + Math.random()*CONFIG.confettiDurationMs) + 'ms';
        p.style.animationDelay = (Math.random()*140) + 'ms';
        p.style.transform = `rotate(${Math.random()*180}deg)`;
        p.style.width = (8 + Math.random()*10) + 'px';
        p.style.height = (10 + Math.random()*14) + 'px';
        confetti.appendChild(p);
      }

      setTimeout(()=>{ confetti.innerHTML = ''; }, CONFIG.confettiDurationMs + 1200);
    }

    // Meme mode: p≈ÇywajƒÖce lwy morskie
    let memeMode = false;
    const memeSeals = [];

    function createFloatingSeal(){
      const el = document.createElement('div');
      el.style.position = 'fixed';
      el.style.left = (Math.random()*100) + 'vw';
      el.style.top  = (Math.random()*100) + 'vh';
      el.style.width = '64px';
      el.style.height= '64px';
      el.style.opacity = '.58';
      el.style.pointerEvents = 'none';
      el.style.filter = 'drop-shadow(0 14px 22px rgba(0,0,0,.45))';
      el.style.transform = `rotate(${Math.floor(Math.random()*30-15)}deg)`;

      el.innerHTML = `
        <svg viewBox="0 0 96 96" aria-hidden="true">
          <defs>
            <linearGradient id="sealFloat" x1="0" x2="1" y1="0" y2="1">
              <stop offset="0" stop-color="rgba(196,164,132,.95)"/>
              <stop offset="1" stop-color="rgba(123,97,80,.95)"/>
            </linearGradient>
          </defs>
          <ellipse cx="48" cy="58" rx="32" ry="27" fill="url(#sealFloat)"/>
          <ellipse cx="48" cy="62" rx="24" ry="19" fill="rgba(0,0,0,.12)"/>
          <path d="M22 66c-7 8-3 18 9 18 7 0 11-5 11-9-2-8-8-12-20-9z" fill="rgba(0,0,0,.12)"/>
          <path d="M74 66c7 8 3 18-9 18-7 0-11-5-11-9 2-8 8-12 20-9z" fill="rgba(0,0,0,.12)"/>
          <circle cx="40" cy="54" r="4" fill="rgba(0,0,0,.55)"/>
          <circle cx="60" cy="54" r="4" fill="rgba(0,0,0,.55)"/>
          <circle cx="48" cy="60" r="3" fill="rgba(0,0,0,.35)"/>
          <path d="M44 64c4 4 4 4 8 0" stroke="rgba(0,0,0,.45)" stroke-width="4" stroke-linecap="round" fill="none"/>
          <path d="M30 62h10" stroke="rgba(255,255,255,.28)" stroke-width="2" stroke-linecap="round"/>
          <path d="M56 62h10" stroke="rgba(255,255,255,.28)" stroke-width="2" stroke-linecap="round"/>
        </svg>
      `;

      document.body.appendChild(el);

      const dx = (Math.random() > .5 ? 1 : -1) * (10 + Math.random()*18);
      const dy = (Math.random() > .5 ? 1 : -1) * (10 + Math.random()*18);
      const dur = 6000 + Math.random()*6000;
      el.animate([
        { transform: el.style.transform + ' translate(0,0)' },
        { transform: el.style.transform + ` translate(${dx}vw, ${dy}vh)` },
        { transform: el.style.transform + ' translate(0,0)' }
      ], { duration: dur, iterations: Infinity, easing: 'ease-in-out' });

      return el;
    }

    toggleBgBtn.addEventListener('click', ()=>{
      memeMode = !memeMode;
      toggleBgBtn.textContent = memeMode ? 'Mniej mem√≥w ‚ú®' : 'Tryb mem√≥w ü¶≠';

      if(memeMode){
        for(let i=0;i<7;i++) memeSeals.push(createFloatingSeal());
        toastShow('Tryb mem√≥w: ON ü¶≠', 900);
      }else{
        while(memeSeals.length){
          const el = memeSeals.pop();
          el?.remove();
        }
        toastShow('Tryb mem√≥w: OFF ‚ú®', 900);
      }
    });

    // Popup automatycznie po wej≈õciu w link
    window.addEventListener('load', () => {
      setTimeout(openModal, 450);
    });

    // Serduszka za kursorem/dotykiem (Opcja 8)
    (function initHearts(){
      if(!CONFIG.heartsEnabled) return;
      let last = 0;
      const hearts = [];

      function spawnHeart(x, y){
        const now = performance.now();
        if(now - last < CONFIG.heartsThrottleMs) return;
        last = now;

        const el = document.createElement('div');
        el.className = 'heart';
        const palette = ['‚ù§Ô∏è','üíñ','üíò','üíó'];
        el.textContent = palette[Math.floor(Math.random()*palette.length)];

        const dx = (Math.random()*18 - 9);
        const dy = -(22 + Math.random()*26);
        const rot = (Math.random()*40 - 20) + 'deg';

        el.style.left = x + 'px';
        el.style.top  = y + 'px';
        el.style.setProperty('--dx', dx + 'px');
        el.style.setProperty('--dy', dy + 'px');
        el.style.setProperty('--rot', rot);
        el.style.fontSize = (14 + Math.random()*10) + 'px';

        document.body.appendChild(el);
        hearts.push(el);

        el.addEventListener('animationend', ()=>{
          el.remove();
          const i = hearts.indexOf(el);
          if(i >= 0) hearts.splice(i,1);
        });

        while(hearts.length > CONFIG.heartsMaxOnScreen){
          const old = hearts.shift();
          old?.remove();
        }
      }

      document.addEventListener('pointermove', (e)=>{
        spawnHeart(e.clientX, e.clientY);
      }, { passive:true });

      document.addEventListener('touchmove', (e)=>{
        if(!e.touches || !e.touches[0]) return;
        spawnHeart(e.touches[0].clientX, e.touches[0].clientY);
      }, { passive:true });
    })();

  </script>
</body>
</html>
